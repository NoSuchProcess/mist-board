#summary documentation for the ZX Spectrum core
#sidebar CoreDocTOC

= Introduction =

This page has operating instructions for the ZX Spectrum core.

= Links =

 * [http://www.mike-stirling.com/retro-fpga/zx-spectrum-on-an-fpga/ ZX Spectrum on FPGA homepage]
 * [http://code.google.com/p/mist-board/source/browse/trunk/bin/cores/spectrum Core binaries]
 * [http://ramsoft.bbk.org.omegahg.com/csw.html#CSW1FORMAT Info on the CSW1 file format]
 * [http://www.worldofspectrum.org/zxplus3e/ Spectrum +3e Homepage]
 * [http://www.probosci.de/zxbada/zxmmcp/ ZXMMC+ HomePage]

= Installation =

Copy the {{{*}}}.rbf file at the root of the SD card.
You can rename the file to core.rbf if you want the MiST to load it automatically at startup.

ROMs (.csw) can be copied anywhere on the SD card and are selected via the OSD menu.
If you have many files you might want to store them into alphabetized sub-folders to access them more quickly.

== Adding a Spectrum +3e ROM ==

The Spectrum core includes Spectrum +2 compatibility since r822. By default the built-in Spectrum 128 will still be used. A Spectrum +2, +3 or [http://www.worldofspectrum.org/zxplus3e/ +3e ROM] can be copied onto the SD card being named `spectrum.rom`. If this file is present it will be auto loaded by default and being used instead of the built-in Spectrum 128 ROM. It is recommended to use the `mmcen3eE.rom` from [http://www.worldofspectrum.org/zxplus3e/files/p3eroms.zip `p3eroms.zip`]. This will detect the ZXMMC+ and will show one MMC drive present.

The Spectrum ROMs do not support SDHC cards. It's thus recommended to use a small non-SDHC card <2GB. As long as you don't let the Spectrum write to the SD card a SDHC card may be used. The initial error message can then be ignored by pressing F12. But keep in mind that even read access to a card >2GB may fail if the data to be accessed lies beyond the 2GB barrier.

== Adding ZXMMC+ flash contents ==

The 512k ROM present on the ZXMMC+ are also available. They are mapped from 512k to 1MB inside the `spectrum.rom` ROM file. To e.g. add the bootloader from [http://www.probosci.de/zxbada/zxmmcp/quickstart.html the ZXMMC+ Homepage] you first need to append 448k to the `mmcen3eE.rom` (making it a total of 512k). Then append the `ROMIMAGE.ROM` from the [http://www.probosci.de/zxbada/zxmmcp/software/bootrom_v2.21e.zip ] `bootrom_v2.21e.zip`].

Under Linux the following commands will do:
{{{
dd if=/dev/zero of=blank448k bs=1k count=448
cat mmcen3eE.rom blank448k ROMIMAGE.ROM > spectrum.rom
}}}

Concatenating 8 copies of the `mmcen3eE.rom` will also result in the required 512k image to which the bootloader can then be appended.

To boot from the ZXMMC+ flash ROM open the OSD and set `ZXMMC+ overlay` to on, `ZXMMC+ memory` to ROM and select Reset. You should now see the bootloader with the SD card CID being displayed on the bottom.

== Converting CSW1 files ==
 
 * The [https://code.google.com/p/mist-board/source/browse/#svn%2Ftrunk%2Ftools%2Ftzx2wav TZX2WAV utility] can convert TZX files into CSW.
 * To convert TAP files into TZW you might need to use older utilities.

Some older utilities no longer work in the latest version of Windows, but you can use Dosbox to run them.

----

= OSD Menu =

The core will start with a blank screen. Press F12 to enter the OSD menu:

<img title="OSD Menu - Page 1" src="http://mist-board.googlecode.com/svn/wiki/img_docs/zx_speccy_osd1.jpg" width="320px" />

  * *Load {{{*}}}.CSW*: load a CSW tape image from the SD card
  * *Reset*: restart the ZX spectrum core

<img title="OSD Menu - Page 1" src="http://mist-board.googlecode.com/svn/wiki/img_docs/zx_speccy_osd2.jpg" width="320px" />

The second page contains some general options:
  * *Firmware & core *: allows to switch to another core or upgrade the MiST firmware
  * *Save settings*: save the current settings to the SD card for next startup

In the rom selection screen, you can select a CSW with Enter.

== Notes ==

  * Video mode is 720x572p at 50hz.

----

= Gameplay videos =

<wiki:video url="https://www.youtube.com/watch?v=1NdAtpZnerE"/>

<wiki:video url="https://www.youtube.com/watch?v=-noxm7VzhfM"/>

----

= Demos =

<wiki:video url="https://www.youtube.com/watch?v=WV0I8n1uMTo"/>